"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[589],{6589:function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var a=s(7314),i=s(3698),l=s(2938),n=s(3180),r=s(4414),o=s(3449),d=s(3064),c=s(9991),u=s(6930),m=s(2756),h=s(4312),f=s(7150),g=s(1034),p=s(7112),b=function(){var e=this,t=e._self._c;return t(o.A,{attrs:{fluid:""}},[t(i.A,{staticClass:"elevation-2"},[t(l.ri,{staticClass:"headline"},[e._v(" Student "),t(g.A),t(p.A,{staticClass:"mr-4",staticStyle:{"max-width":"300px"},attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search students",clearable:"",outlined:"",dense:"","hide-details":"",rounded:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),t(a.A,{attrs:{color:"primary"},on:{click:e.openCreateDialog}},[t(u.A,{attrs:{left:""}},[e._v("mdi-plus")]),e._v(" Add New Student ")],1)],1),t(d.A,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.students,search:e.search,"items-per-page":10,loading:e.loading,"loading-text":"Loading students... Please wait","no-data-text":"No students found"},scopedSlots:e._u([{key:"item.status",fn:function({item:s}){return[t(n.A,{attrs:{color:"active"===s.status?"green":"red","text-color":"white",small:""}},[e._v(" "+e._s(s.status)+" ")])]}},{key:"item.actions",fn:function({item:s}){return[t(a.A,{staticClass:"mr-2",attrs:{icon:"",small:""},on:{click:function(t){return e.openEditDialog(s)}}},[t(u.A,{attrs:{small:""}},[e._v("mdi-pencil")])],1),t(a.A,{attrs:{icon:"",small:""},on:{click:function(t){return e.openDeleteDialog(s)}}},[t(u.A,{attrs:{small:""}},[e._v("mdi-delete")])],1)]}}])})],1),t(c.A,{attrs:{"max-width":"800px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(i.A,[t(l.ri,[t("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),t(l.OQ,[t(o.A,[t(m.A,[t(r.A,{attrs:{cols:"12",sm:"6"}},[t(p.A,{attrs:{label:"StudentIdNo",required:""},model:{value:e.editedItem.StudentIdNo,callback:function(t){e.$set(e.editedItem,"StudentIdNo",t)},expression:"editedItem.StudentIdNo"}})],1)],1),t(m.A,[t(r.A,{attrs:{cols:"12",sm:"4"}},[t(p.A,{attrs:{label:"First Name",required:""},model:{value:e.editedItem.firstName,callback:function(t){e.$set(e.editedItem,"firstName",t)},expression:"editedItem.firstName"}})],1),t(r.A,{attrs:{cols:"12",sm:"4"}},[t(p.A,{attrs:{label:"Middle Name",required:""},model:{value:e.editedItem.middleName,callback:function(t){e.$set(e.editedItem,"middleName",t)},expression:"editedItem.middleName"}})],1),t(r.A,{attrs:{cols:"12",sm:"4"}},[t(p.A,{attrs:{label:"Last Name",required:""},model:{value:e.editedItem.lastName,callback:function(t){e.$set(e.editedItem,"lastName",t)},expression:"editedItem.lastName"}})],1),t(r.A,{attrs:{cols:"12",sm:"4"}},[t(p.A,{attrs:{label:"Section",required:""},model:{value:e.editedItem.section,callback:function(t){e.$set(e.editedItem,"section",t)},expression:"editedItem.section"}})],1),t(r.A,{attrs:{cols:"12",sm:"4"}},[t(h.A,{attrs:{items:["First","Second","Third","Fourth"],label:"Year Level",required:""},model:{value:e.editedItem.yearLevel,callback:function(t){e.$set(e.editedItem,"yearLevel",t)},expression:"editedItem.yearLevel"}})],1),t(r.A,{attrs:{cols:"12",sm:"4"}},[t(h.A,{attrs:{items:e.programs,"item-text":"programName","item-value":"_id",label:"Program",required:""},model:{value:e.editedItem.programId,callback:function(t){e.$set(e.editedItem,"programId",t)},expression:"editedItem.programId"}})],1),t(r.A,{attrs:{cols:"12",sm:"4"}},[t(h.A,{attrs:{items:e.classrooms,"item-text":"name","item-value":"_id",label:"Classroom",required:""},model:{value:e.editedItem.classroomId,callback:function(t){e.$set(e.editedItem,"classroomId",t)},expression:"editedItem.classroomId"}})],1),t(r.A,{attrs:{cols:"12",sm:"4"}},[t(h.A,{attrs:{items:["active","inactive"],label:"Status",required:""},model:{value:e.editedItem.status,callback:function(t){e.$set(e.editedItem,"status",t)},expression:"editedItem.status"}})],1)],1)],1)],1),t(l.SL,[t(g.A),t(a.A,{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialog}},[e._v("Cancel")]),t(a.A,{attrs:{color:"blue darken-1",text:""},on:{click:e.saveStudent}},[e._v("Save")])],1)],1)],1),t(c.A,{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[t(i.A,[t(l.ri,{staticClass:"headline"},[e._v("Delete Student")]),t(l.OQ,[e._v("Are you sure you want to delete this student?")]),t(l.SL,[t(g.A),t(a.A,{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDeleteDialog}},[e._v("Cancel")]),t(a.A,{attrs:{color:"red darken-1",text:""},on:{click:e.deleteStudent}},[e._v("Delete")])],1)],1)],1),t(f.A,{attrs:{color:e.snackbarColor,timeout:3e3},scopedSlots:e._u([{key:"action",fn:function({attrs:s}){return[t(a.A,e._b({attrs:{text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",s,!1),[e._v("Close")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+" ")])],1)},v=[],I=(s(4114),{name:"StudentManagementPage",data:()=>({dialog:!1,deleteDialog:!1,snackbar:!1,snackbarColor:"",snackbarText:"",loading:!1,search:"",showPassword:!1,headers:[{text:"Student ID",value:"StudentIdNo"},{text:"First Name",value:"firstName"},{text:"Middle Name",value:"middleName"},{text:"Last Name",value:"lastName"},{text:"Section",value:"section"},{text:"Year Level",value:"yearLevel"},{text:"Program",value:"programId.programName"},{text:"Classroom",value:"classroomId.name"},{text:"Status",value:"status"},{text:"Actions",value:"actions",sortable:!1}],students:[],programs:[],classrooms:[],editedIndex:-1,editedItem:{_id:"",StudentIdNo:"",firstName:"",middleName:"",lastName:"",section:"",yearLevel:null,programId:null,classroomId:null,status:"active"},defaultItem:{StudentIdNo:"",firstName:"",middleName:"",lastName:"",section:"",yearLevel:null,programId:null,classroomId:null,status:"active"}}),computed:{formTitle(){return-1===this.editedIndex?"New Student":"Edit Student"}},created(){this.fetchStudents(),this.fetchPrograms(),this.fetchClassrooms()},methods:{async fetchStudents(){this.loading=!0;try{const e=await this.$http.get("/student");this.students=e.data.data.items}catch(e){console.error("Error fetching students:",e),this.showSnackbar("Error fetching students","error")}finally{this.loading=!1}},async fetchPrograms(){try{const e=await this.$http.get("/program");this.programs=e.data.data.items}catch(e){console.error("Error fetching programs:",e),this.showSnackbar("Error fetching programs","error")}},async fetchClassrooms(){try{const e=await this.$http.get("/classroom");this.classrooms=e.data.data.items}catch(e){console.error("Error fetching classrooms:",e),this.showSnackbar("Error fetching classrooms","error")}},openCreateDialog(){this.editedIndex=-1,this.editedItem=Object.assign({},this.defaultItem),this.dialog=!0},openEditDialog(e){this.editedIndex=this.students.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},openDeleteDialog(e){this.editedItem=Object.assign({},e),this.deleteDialog=!0},closeDialog(){this.dialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem),this.editedIndex=-1}))},closeDeleteDialog(){this.deleteDialog=!1,this.$nextTick((()=>{this.editedItem=Object.assign({},this.defaultItem)}))},async saveStudent(){try{if(this.editedIndex>-1)await this.$http.put(`/student/${this.editedItem._id}`,this.editedItem),Object.assign(this.students[this.editedIndex],this.editedItem),this.showSnackbar("Student updated successfully","success");else{const e=await this.$http.post("/student",this.editedItem);this.students.push(e.data.data.item),this.showSnackbar("Student created successfully","success")}this.closeDialog(),this.fetchStudents()}catch(e){console.error("Error saving student:",e),this.showSnackbar("Error saving student","error")}},async deleteStudent(){try{await this.$http.delete(`/student/${this.editedItem._id}`);const e=this.students.findIndex((e=>e._id===this.editedItem._id));this.students.splice(e,1),this.closeDeleteDialog(),this.showSnackbar("Student deleted successfully","success")}catch(e){console.error("Error deleting student:",e),this.showSnackbar("Error deleting student","error")}},showSnackbar(e,t){this.snackbarText=e,this.snackbarColor=t,this.snackbar=!0}}}),S=I,k=s(1656),y=(0,k.A)(S,b,v,!1,null,null,null),x=y.exports},4414:function(e,t,s){s(4114),s(125);var a=s(5471),i=s(8041),l=s(4152);const n=["sm","md","lg","xl"],r=(()=>n.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),o=(()=>n.reduce(((e,t)=>(e["offset"+(0,l.Zb)(t)]={type:[String,Number],default:null},e)),{}))(),d=(()=>n.reduce(((e,t)=>(e["order"+(0,l.Zb)(t)]={type:[String,Number],default:null},e)),{}))(),c={col:Object.keys(r),offset:Object.keys(o),order:Object.keys(d)};function u(e,t,s){let a=e;if(null!=s&&!1!==s){if(t){const s=t.replace(e,"");a+=`-${s}`}return"col"!==e||""!==s&&!0!==s?(a+=`-${s}`,a.toLowerCase()):a.toLowerCase()}}const m=new Map;t.A=a.Ay.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...r,offset:{type:[String,Number],default:null},...o,order:{type:[String,Number],default:null},...d,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:s,children:a,parent:l}){let n="";for(const i in t)n+=String(t[i]);let r=m.get(n);if(!r){let e;for(e in r=[],c)c[e].forEach((s=>{const a=t[s],i=u(e,s,a);i&&r.push(i)}));const s=r.some((e=>e.startsWith("col-")));r.push({col:!s||!t.cols,[`col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),m.set(n,r)}return e(t.tag,(0,i.Ay)(s,{class:r}),a)}})},2756:function(e,t,s){s(4114),s(125);var a=s(5471),i=s(8041),l=s(4152);const n=["sm","md","lg","xl"],r=["start","end","center"];function o(e,t){return n.reduce(((s,a)=>(s[e+(0,l.Zb)(a)]=t(),s)),{})}const d=e=>[...r,"baseline","stretch"].includes(e),c=o("align",(()=>({type:String,default:null,validator:d}))),u=e=>[...r,"space-between","space-around"].includes(e),m=o("justify",(()=>({type:String,default:null,validator:u}))),h=e=>[...r,"space-between","space-around","stretch"].includes(e),f=o("alignContent",(()=>({type:String,default:null,validator:h}))),g={align:Object.keys(c),justify:Object.keys(m),alignContent:Object.keys(f)},p={align:"align",justify:"justify",alignContent:"align-content"};function b(e,t,s){let a=p[e];if(null!=s){if(t){const s=t.replace(e,"");a+=`-${s}`}return a+=`-${s}`,a.toLowerCase()}}const v=new Map;t.A=a.Ay.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d},...c,justify:{type:String,default:null,validator:u},...m,alignContent:{type:String,default:null,validator:h},...f},render(e,{props:t,data:s,children:a}){let l="";for(const i in t)l+=String(t[i]);let n=v.get(l);if(!n){let e;for(e in n=[],g)g[e].forEach((s=>{const a=t[s],i=b(e,s,a);i&&n.push(i)}));n.push({"no-gutters":t.noGutters,"row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),v.set(l,n)}return e(t.tag,(0,i.Ay)(s,{staticClass:"row",class:n}),a)}})}}]);
//# sourceMappingURL=589.f4d21f9b.js.map