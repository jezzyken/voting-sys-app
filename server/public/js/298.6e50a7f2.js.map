{"version":3,"file":"js/298.6e50a7f2.js","mappings":"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","sources":["webpack://client/./src/views/CandidatesListPage.vue","webpack://client/src/views/CandidatesListPage.vue","webpack://client/./src/views/CandidatesListPage.vue?d387","webpack://client/./src/views/CandidatesListPage.vue?e66c","webpack://client/../../../src/components/VForm/VForm.ts","webpack://client/../../../src/components/VTextarea/VTextarea.ts"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-card',{staticClass:\"elevation-2\"},[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\" Candidates for \"+_vm._s(_vm.election ? _vm.election.name : \"Loading...\")+\" \"),_c('v-spacer'),_c('v-text-field',{staticClass:\"mr-4\",staticStyle:{\"max-width\":\"300px\"},attrs:{\"prepend-inner-icon\":\"mdi-magnify\",\"label\":\"Search candidates\",\"clearable\":\"\",\"outlined\":\"\",\"rounded\":\"\",\"dense\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.candidates,\"search\":_vm.search,\"items-per-page\":10,\"loading\":_vm.loading,\"loading-text\":\"Loading candidates... Please wait\",\"no-data-text\":\"No candidates found\",\"footer-props\":{\n        'items-per-page-options': [5, 10, 15, 20],\n      }},scopedSlots:_vm._u([{key:\"item\",fn:function({ item, index }){return [_c('tr',{class:index % 2 === 0 ? 'grey lighten-4' : ''},[_c('td',[_c('img',{staticClass:\"ma-2\",attrs:{\"src\":item.imageUrl,\"alt\":\"Student Image\",\"width\":\"50\",\"height\":\"50\"}})]),_c('td',[_vm._v(_vm._s(item.student.fullName))]),_c('td',[_vm._v(_vm._s(item.position))]),_c('td',[_vm._v(_vm._s(item.manifesto))]),_c('td',{staticClass:\"text-right\"},[_c('v-btn',{staticClass:\"mr-2\",attrs:{\"icon\":\"\",\"small\":\"\"},on:{\"click\":function($event){return _vm.openEditDialog(item)}}},[_c('v-icon',{attrs:{\"small\":\"\"}},[_vm._v(\"mdi-eye\")])],1)],1)])]}}])})],1),_c('v-dialog',{attrs:{\"max-width\":\"600px\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.formTitle))])]),_c('v-card-text',[_c('v-container',[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"label\":\"Name\",\"rules\":[(v) => !!v || 'Position name is required'],\"required\":\"\",\"readonly\":\"\"},model:{value:(_vm.studentName),callback:function ($$v) {_vm.studentName=$$v},expression:\"studentName\"}}),_c('v-text-field',{attrs:{\"label\":\"Position\",\"rules\":[(v) => !!v || 'Position name is required'],\"required\":\"\",\"readonly\":\"\"},model:{value:(_vm.editedItem.position),callback:function ($$v) {_vm.$set(_vm.editedItem, \"position\", $$v)},expression:\"editedItem.position\"}}),(_vm.editedItem.imageUrl)?_c('v-img',{attrs:{\"src\":_vm.editedItem.imageUrl,\"max-height\":\"200\",\"contain\":\"\"}}):_vm._e(),_c('v-textarea',{attrs:{\"readonly\":\"\",\"label\":\"Manifesto\",\"required\":\"\",\"rules\":[(v) => !!v || 'Manifesto is required']},model:{value:(_vm.editedItem.manifesto),callback:function ($$v) {_vm.$set(_vm.editedItem, \"manifesto\", $$v)},expression:\"editedItem.manifesto\"}})],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.closeDialog}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.saveCandidate}},[_vm._v(\"Save\")])],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"500px\"},model:{value:(_vm.deleteDialog),callback:function ($$v) {_vm.deleteDialog=$$v},expression:\"deleteDialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Delete Candidate\")]),_c('v-card-text',[_vm._v(\"Are you sure you want to delete this candidate?\")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"blue darken-1\",\"text\":\"\"},on:{\"click\":_vm.closeDeleteDialog}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"red darken-1\",\"text\":\"\"},on:{\"click\":_vm.deleteCandidate}},[_vm._v(\"Delete\")])],1)],1)],1),_c('v-snackbar',{attrs:{\"color\":_vm.snackbarColor,\"timeout\":3000},scopedSlots:_vm._u([{key:\"action\",fn:function({ attrs }){return [_c('v-btn',_vm._b({attrs:{\"text\":\"\"},on:{\"click\":function($event){_vm.snackbar = false}}},'v-btn',attrs,false),[_vm._v(\"Close\")])]}}]),model:{value:(_vm.snackbar),callback:function ($$v) {_vm.snackbar=$$v},expression:\"snackbar\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarText)+\" \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fluid>\n    <v-card class=\"elevation-2\">\n      <v-card-title class=\"headline\">\n        Candidates for {{ election ? election.name : \"Loading...\" }}\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model=\"search\"\n          prepend-inner-icon=\"mdi-magnify\"\n          label=\"Search candidates\"\n          clearable\n          outlined\n          rounded\n          dense\n          hide-details\n          class=\"mr-4\"\n          style=\"max-width: 300px\"\n        ></v-text-field>\n        <!-- <v-btn color=\"primary\" @click=\"openCreateDialog\">\n          <v-icon left>mdi-plus</v-icon>\n          File Candidacy\n        </v-btn> -->\n      </v-card-title>\n      <v-data-table\n        :headers=\"headers\"\n        :items=\"candidates\"\n        :search=\"search\"\n        :items-per-page=\"10\"\n        class=\"elevation-1\"\n        :loading=\"loading\"\n        loading-text=\"Loading candidates... Please wait\"\n        no-data-text=\"No candidates found\"\n        :footer-props=\"{\n          'items-per-page-options': [5, 10, 15, 20],\n        }\"\n      >\n        <template v-slot:item=\"{ item, index }\">\n          <tr :class=\"index % 2 === 0 ? 'grey lighten-4' : ''\">\n            <td>\n              <img\n                :src=\"item.imageUrl\"\n                alt=\"Student Image\"\n                width=\"50\"\n                height=\"50\"\n                class=\"ma-2\"\n              />\n            </td>\n            <td>{{ item.student.fullName }}</td>\n            <td>{{ item.position }}</td>\n            <td>{{ item.manifesto }}</td>\n            <td class=\"text-right\">\n              <v-btn icon small class=\"mr-2\" @click=\"openEditDialog(item)\">\n                <v-icon small>mdi-eye</v-icon>\n              </v-btn>\n              <!-- <v-btn icon small @click=\"openDeleteDialog(item)\">\n                <v-icon small>mdi-delete</v-icon>\n              </v-btn> -->\n            </td>\n          </tr>\n        </template>\n      </v-data-table>\n    </v-card>\n\n    <!-- Create/Edit Dialog -->\n    <v-dialog v-model=\"dialog\" max-width=\"600px\">\n      <v-card>\n        <v-card-title>\n          <span class=\"headline\">{{ formTitle }}</span>\n        </v-card-title>\n\n        <v-card-text>\n          <v-container>\n            <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n              <!-- <v-autocomplete\n                v-model=\"editedItem.studentId\"\n                :items=\"students\"\n                item-text=\"name\"\n                item-value=\"_id\"\n                label=\"Search Student by Name or LRN\"\n                placeholder=\"Start typing to search\"\n                prepend-icon=\"mdi-database-search\"\n                return-object\n                required\n                :rules=\"[(v) => !!v || 'Student is required']\"\n              >\n                <template v-slot:item=\"{ item }\">\n                  <v-list-item-content>\n                    <v-list-item-title v-text=\"item.name\"></v-list-item-title>\n                    <v-list-item-subtitle\n                      v-text=\"item.lrn\"\n                    ></v-list-item-subtitle>\n                  </v-list-item-content>\n                </template>\n              </v-autocomplete> -->\n\n              <v-text-field\n                v-model=\"studentName\"\n                label=\"Name\"\n                :rules=\"[(v) => !!v || 'Position name is required']\"\n                required\n                readonly\n              ></v-text-field>\n\n              <v-text-field\n                v-model=\"editedItem.position\"\n                label=\"Position\"\n                :rules=\"[(v) => !!v || 'Position name is required']\"\n                required\n                readonly\n              ></v-text-field>\n\n              <!-- <v-select\n                v-model=\"editedItem.position\"\n                :items=\"positions\"\n                label=\"Position\"\n                required\n                :rules=\"[(v) => !!v || 'Position is required']\"\n              ></v-select> -->\n\n              <!-- <v-file-input\n                v-model=\"imageFile\"\n                accept=\"image/*\"\n                label=\"Candidate Image\"\n                prepend-icon=\"mdi-camera\"\n              ></v-file-input> -->\n\n              <v-img\n                v-if=\"editedItem.imageUrl\"\n                :src=\"editedItem.imageUrl\"\n                max-height=\"200\"\n                contain\n              ></v-img>\n\n              <!-- <v-select\n                v-model=\"editedItem.partyId\"\n                :items=\"parties\"\n                item-text=\"name\"\n                item-value=\"_id\"\n                label=\"Party\"\n              ></v-select> -->\n              <v-textarea\n                readonly\n                v-model=\"editedItem.manifesto\"\n                label=\"Manifesto\"\n                required\n                :rules=\"[(v) => !!v || 'Manifesto is required']\"\n              ></v-textarea>\n            </v-form>\n          </v-container>\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"blue darken-1\" text @click=\"closeDialog\">Cancel</v-btn>\n          <v-btn color=\"blue darken-1\" text @click=\"saveCandidate\">Save</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-dialog v-model=\"deleteDialog\" max-width=\"500px\">\n      <v-card>\n        <v-card-title class=\"headline\">Delete Candidate</v-card-title>\n        <v-card-text\n          >Are you sure you want to delete this candidate?</v-card-text\n        >\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn color=\"blue darken-1\" text @click=\"closeDeleteDialog\"\n            >Cancel</v-btn\n          >\n          <v-btn color=\"red darken-1\" text @click=\"deleteCandidate\"\n            >Delete</v-btn\n          >\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n    <v-snackbar v-model=\"snackbar\" :color=\"snackbarColor\" :timeout=\"3000\">\n      {{ snackbarText }}\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn text v-bind=\"attrs\" @click=\"snackbar = false\">Close</v-btn>\n      </template>\n    </v-snackbar>\n  </v-container>\n</template>\n\n<script>\nimport { baseURL, currentEnv } from \"@/config/baseURL\";\n\nexport default {\n  name: \"CandidateManagementPage\",\n  data: () => ({\n    dialog: false,\n    deleteDialog: false,\n    valid: true,\n    snackbar: false,\n    snackbarColor: \"\",\n    snackbarText: \"\",\n    loading: false,\n    search: \"\",\n    headers: [\n      {\n        text: \"Image\",\n        value: \"imageUrl\",\n        align: \"start\",\n      },\n      {\n        text: \"Student Name\",\n        value: \"student.fullName\",\n        align: \"start\",\n        sortable: true,\n      },\n      { text: \"Position\", value: \"position\", sortable: true },\n      { text: \"Manifesto\", value: \"manifesto\", sortable: false, left: \"end\" },\n      { text: \"Actions\", value: \"actions\", sortable: false, align: \"end\" },\n    ],\n    candidates: [],\n    students: [],\n    elections: [],\n    positions: [],\n    parties: [],\n    editedIndex: -1,\n    editedItem: {\n      _id: \"\",\n      studentId: \"\",\n      electionId: \"\",\n      position: \"\",\n      partyId: \"\",\n      manifesto: \"\",\n    },\n    defaultItem: {\n      studentId: \"\",\n      electionId: \"\",\n      position: \"\",\n      partyId: \"\",\n      manifesto: \"\",\n    },\n    imageFile: null,\n    electionId: null,\n    election: null,\n    studentName: \"\",\n  }),\n\n  computed: {\n    formTitle() {\n      return this.editedIndex === -1 ? \"File Candidacy\" : \"Edit Candidate\";\n    },\n  },\n\n  created() {\n    this.electionId = this.$route.params.id;\n    this.fetchCandidates();\n    this.fetchStudents();\n    this.fetchElection();\n  },\n\n  methods: {\n    async fetchElection() {\n      try {\n        const response = await this.$http.get(`/election/${this.electionId}`);\n        this.election = response.data.data.item;\n        this.positions = this.election.positions;\n      } catch (error) {\n        console.error(\"Error fetching election:\", error);\n        this.showSnackbar(\"Error fetching election details\", \"error\");\n      }\n    },\n\n    async fetchCandidates() {\n      this.loading = true;\n      try {\n        const response = await this.$http.get(\n          `/candidate/election/${this.electionId}`\n        );\n\n        this.candidates = response.data.data.items;\n\n        console.log(this.candidates);\n      } catch (error) {\n        console.error(\"Error fetching candidates:\", error);\n        this.showSnackbar(\"Error fetching candidates\", \"error\");\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    async fetchStudents() {\n      try {\n        const response = await this.$http.get(\"/student\");\n        this.students = response.data.data.items.map((item) => ({\n          ...item,\n          name: `${item.lastName}, ${item.firstName} ${item.middleName}`,\n        }));\n      } catch (error) {\n        console.error(\"Error fetching students:\", error);\n      }\n    },\n\n    openCreateDialog() {\n      this.editedIndex = -1;\n      this.editedItem = Object.assign({}, this.defaultItem, {\n        electionId: this.electionId,\n      });\n      this.dialog = true;\n    },\n\n    openEditDialog(item) {\n      this.studentName = item.student.fullName;\n      this.positions = this.elections\n        .filter((e) => e._id === item.electionId._id)\n        .map((item) => item.positions)[0];\n      this.editedIndex = this.candidates.indexOf(item);\n      this.editedItem = Object.assign({}, item);\n      this.dialog = true;\n    },\n\n    closeDialog() {\n      this.dialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n        this.editedIndex = -1;\n        this.imageFile = null;\n        this.$refs.form.reset();\n      });\n    },\n    openDeleteDialog(item) {\n      this.editedItem = Object.assign({}, item);\n      this.deleteDialog = true;\n    },\n\n    closeDeleteDialog() {\n      this.deleteDialog = false;\n      this.$nextTick(() => {\n        this.editedItem = Object.assign({}, this.defaultItem);\n      });\n    },\n\n    async saveCandidate() {\n      if (this.$refs.form.validate()) {\n        try {\n          const formData = new FormData();\n          Object.keys(this.editedItem).forEach((key) => {\n            if (key !== \"studentId\") {\n              formData.append(key, this.editedItem[key]);\n            }\n          });\n          formData.append(\"studentId\", this.editedItem.studentId._id);\n\n          if (this.imageFile) {\n            formData.append(\"image\", this.imageFile);\n          }\n\n          let response;\n          if (this.editedIndex > -1) {\n            response = await this.$http.put(\n              `/candidate/${this.editedItem._id}`,\n              formData,\n              {\n                headers: {\n                  \"Content-Type\": \"multipart/form-data\",\n                },\n              }\n            );\n            Object.assign(\n              this.candidates[this.editedIndex],\n              response.data.data.item\n            );\n            this.showSnackbar(\"Candidate updated successfully\", \"success\");\n          } else {\n            response = await this.$http.post(\"/candidate\", formData, {\n              headers: {\n                \"Content-Type\": \"multipart/form-data\",\n              },\n            });\n            this.candidates.push(response.data.data.item);\n            this.showSnackbar(\"Candidacy filed successfully\", \"success\");\n          }\n          this.closeDialog();\n        } catch (error) {\n          console.error(\"Error saving candidate:\", error);\n          this.showSnackbar(\"Error saving candidate\", \"error\");\n        }\n      }\n    },\n\n    async deleteCandidate() {\n      try {\n        await this.$http.delete(`/candidate/${this.editedItem._id}`);\n        const index = this.candidates.findIndex(\n          (candidate) => candidate._id === this.editedItem._id\n        );\n        this.candidates.splice(index, 1);\n        this.closeDeleteDialog();\n        this.showSnackbar(\"Candidate deleted successfully\", \"success\");\n      } catch (error) {\n        console.error(\"Error deleting candidate:\", error);\n        this.showSnackbar(\"Error deleting candidate\", \"error\");\n      }\n    },\n\n    showSnackbar(text, color) {\n      this.snackbarText = text;\n      this.snackbarColor = color;\n      this.snackbar = true;\n    },\n\n    onSelectElection(id) {\n      this.positions = this.elections\n        .filter((e) => e._id === id)\n        .map((item) => item.positions)[0];\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CandidatesListPage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CandidatesListPage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CandidatesListPage.vue?vue&type=template&id=5bedf008\"\nimport script from \"./CandidatesListPage.vue?vue&type=script&lang=js\"\nexport * from \"./CandidatesListPage.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Components\nimport VInput from '../VInput/VInput'\n\n// Mixins\nimport mixins from '../../util/mixins'\nimport BindsAttrs from '../../mixins/binds-attrs'\nimport { provide as RegistrableProvide } from '../../mixins/registrable'\n\n// Helpers\nimport { VNode } from 'vue'\nimport { getSlot } from '../../util/helpers'\n\ntype ErrorBag = Record<number, boolean>\ntype VInputInstance = InstanceType<typeof VInput>\ntype Watchers = {\n  _uid: number\n  valid: () => void\n  shouldValidate: () => void\n}\n\n/* @vue/component */\nexport default mixins(\n  BindsAttrs,\n  RegistrableProvide('form')\n  /* @vue/component */\n).extend({\n  name: 'v-form',\n\n  provide (): object {\n    return { form: this }\n  },\n\n  inheritAttrs: false,\n\n  props: {\n    disabled: Boolean,\n    lazyValidation: Boolean,\n    readonly: Boolean,\n    value: Boolean,\n  },\n\n  data: () => ({\n    inputs: [] as VInputInstance[],\n    watchers: [] as Watchers[],\n    errorBag: {} as ErrorBag,\n  }),\n\n  watch: {\n    errorBag: {\n      handler (val) {\n        const errors = Object.values(val).includes(true)\n\n        this.$emit('input', !errors)\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n\n  methods: {\n    watchInput (input: any): Watchers {\n      const watcher = (input: any): (() => void) => {\n        return input.$watch('hasError', (val: boolean) => {\n          this.$set(this.errorBag, input._uid, val)\n        }, { immediate: true })\n      }\n\n      const watchers: Watchers = {\n        _uid: input._uid,\n        valid: () => {},\n        shouldValidate: () => {},\n      }\n\n      if (this.lazyValidation) {\n        // Only start watching inputs if we need to\n        watchers.shouldValidate = input.$watch('shouldValidate', (val: boolean) => {\n          if (!val) return\n\n          // Only watch if we're not already doing it\n          if (this.errorBag.hasOwnProperty(input._uid)) return\n\n          watchers.valid = watcher(input)\n        })\n      } else {\n        watchers.valid = watcher(input)\n      }\n\n      return watchers\n    },\n    /** @public */\n    validate (): boolean {\n      return this.inputs.filter(input => !input.validate(true)).length === 0\n    },\n    /** @public */\n    reset (): void {\n      this.inputs.forEach(input => input.reset())\n      this.resetErrorBag()\n    },\n    resetErrorBag () {\n      if (this.lazyValidation) {\n        // Account for timeout in validatable\n        setTimeout(() => {\n          this.errorBag = {}\n        }, 0)\n      }\n    },\n    /** @public */\n    resetValidation () {\n      this.inputs.forEach(input => input.resetValidation())\n      this.resetErrorBag()\n    },\n    register (input: VInputInstance) {\n      this.inputs.push(input)\n      this.watchers.push(this.watchInput(input))\n    },\n    unregister (input: VInputInstance) {\n      const found = this.inputs.find(i => i._uid === input._uid)\n\n      if (!found) return\n\n      const unwatch = this.watchers.find(i => i._uid === found._uid)\n      if (unwatch) {\n        unwatch.valid()\n        unwatch.shouldValidate()\n      }\n\n      this.watchers = this.watchers.filter(i => i._uid !== found._uid)\n      this.inputs = this.inputs.filter(i => i._uid !== found._uid)\n      this.$delete(this.errorBag, found._uid)\n    },\n  },\n\n  render (h): VNode {\n    return h('form', {\n      staticClass: 'v-form',\n      attrs: {\n        novalidate: true,\n        ...this.attrs$,\n      },\n      on: {\n        submit: (e: Event) => this.$emit('submit', e),\n      },\n    }, getSlot(this))\n  },\n})\n","// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    autoGrow (val: boolean) {\n      this.$nextTick(() => {\n        val\n          ? this.calculateInputHeight()\n          : this.$refs.input?.style.removeProperty('height')\n      })\n    },\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n"],"names":["attrs","model","search","callback","expression","_c","staticClass","_vm","loading","scopedSlots","fn","index","item","on","dialog","_v","ref","valid","studentName","$set","editedItem","v","value","deleteCandidate","key","snackbar","staticRenderFns","render","name","data","deleteDialog","snackbarColor","snackbarText","headers","text","align","sortable","left","candidates","students","elections","positions","parties","editedIndex","_id","studentId","electionId","position","partyId","manifesto","defaultItem","imageFile","election","computed","formTitle","created","$route","params","id","fetchCandidates","fetchStudents","fetchElection","methods","response","$http","get","error","console","showSnackbar","items","log","map","lastName","firstName","middleName","openCreateDialog","Object","assign","openEditDialog","student","fullName","filter","e","indexOf","closeDialog","$nextTick","$refs","form","reset","openDeleteDialog","closeDeleteDialog","saveCandidate","validate","formData","FormData","keys","forEach","append","put","post","push","delete","findIndex","candidate","splice","color","onSelectElection","component","mixins","BindsAttrs","RegistrableProvide","extend","provide","this","inheritAttrs","props","disabled","Boolean","lazyValidation","readonly","inputs","watchers","errorBag","watch","handler","val","errors","values","includes","$emit","deep","immediate","watchInput","input","watcher","$watch","_uid","shouldValidate","hasOwnProperty","length","resetErrorBag","setTimeout","resetValidation","register","unregister","found","find","i","unwatch","$delete","h","novalidate","attrs$","submit","getSlot","baseMixins","VTextField","autoGrow","noResize","rowHeight","type","Number","String","default","validator","isNaN","parseFloat","rows","parseInt","classes","noResizeHandle","options","call","calculateInputHeight","_a","style","removeProperty","lazyValue","mounted","height","scrollHeight","minHeight","Math","max","genInput","tag","onInput","onKeyDown","isFocused","keyCode","stopPropagation"],"sourceRoot":""}