"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[173],{9173:function(t,e,s){s.r(e),s.d(e,{default:function(){return E}});var a=s(3740),o=s(3698),r=s(2938),i=s(3180),n=s(4414),c=s(3449),l=s(6814),d=s(9483),u=s(6930),h=s(8983),m=s(7296),p=s(2659),v=s(1376),g=s(739),f=s(3299),y=s(2756),b=s(7150),w=s(7112),x=function(){var t=this,e=t._self._c;return e(c.A,{attrs:{fluid:""}},[e(y.A,[e(n.A,{attrs:{cols:"12",md:"3"}},[e(o.A,{staticClass:"election-list-card",attrs:{elevation:"2"}},[e(r.ri,{staticClass:"primary--text d-flex align-center"},[e(u.A,{attrs:{left:"",color:"primary"}},[t._v("mdi-ballot")]),t._v(" Elections ")],1),e(d.A),e(r.OQ,{staticClass:"pa-0"},[e(h.A,{attrs:{dense:""}},[e(g.A,{model:{value:t.selectedElection,callback:function(e){t.selectedElection=e},expression:"selectedElection"}},t._l(t.elections,(function(s){return e(m.A,{key:s._id,attrs:{value:s._id},on:{click:function(e){return t.generateReport(s._id)}}},[e(v.pr,[e(v.UZ,{staticClass:"font-weight-medium"},[t._v(" "+t._s(s.name)+" ")]),e(v.w,{staticClass:"text-caption"},[t._v(" "+t._s(t.formatDate(s.startDate))+" - "+t._s(t.formatDate(s.endDate))+" ")])],1),e(p.A,[e(i.A,{attrs:{"x-small":"",color:t.getStatusColor(s.status),dark:""}},[t._v(" "+t._s(s.status.toUpperCase())+" ")])],1)],1)})),1)],1)],1)],1)],1),e(n.A,{attrs:{cols:"12",md:"9"}},[e(o.A,{staticClass:"report-card",attrs:{elevation:"2"}},[e(r.ri,{staticClass:"report-header pa-4"},[e("div",{staticClass:"d-flex flex-wrap justify-space-between align-center w-100"},[e("div",{staticClass:"text-body-1 font-weight-bold mr-2"},[t._v(" Voting Status Report ")]),e("div",{staticClass:"d-flex align-center"},[e(a.A,{staticClass:"mr-2",attrs:{color:"primary",disabled:!t.reportData.length,small:""},on:{click:t.exportToExcel}},[e(u.A,{attrs:{left:"",small:""}},[t._v("mdi-microsoft-excel")]),t._v(" Export CSV ")],1),e(a.A,{attrs:{color:"secondary",disabled:!t.selectedElection||!t.isElectionCompleted,small:""},on:{click:t.downloadResults}},[e(u.A,{attrs:{left:"",small:""}},[t._v("mdi-file-pdf-box")]),t._v(" Download Results ")],1)],1)])]),e(r.OQ,{staticClass:"pa-4"},[e(y.A,[e(n.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(o.A,{staticClass:"summary-card primary",attrs:{outlined:""}},[e(r.OQ,{staticClass:"text-center py-4"},[e("div",{staticClass:"text-caption white--text mb-1"},[t._v(" Total Students ")]),e("div",{staticClass:"text-h5 white--text font-weight-bold"},[t._v(" "+t._s(t.summary.totalStudents)+" ")])])],1)],1),e(n.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(o.A,{staticClass:"summary-card success",attrs:{outlined:""}},[e(r.OQ,{staticClass:"text-center py-4"},[e("div",{staticClass:"text-caption white--text mb-1"},[t._v("Voted")]),e("div",{staticClass:"text-h5 white--text font-weight-bold"},[t._v(" "+t._s(t.summary.voted)+" ")])])],1)],1),e(n.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(o.A,{staticClass:"summary-card error",attrs:{outlined:""}},[e(r.OQ,{staticClass:"text-center py-4"},[e("div",{staticClass:"text-caption white--text mb-1"},[t._v("Not Voted")]),e("div",{staticClass:"text-h5 white--text font-weight-bold"},[t._v(" "+t._s(t.summary.notVoted)+" ")])])],1)],1),e(n.A,{attrs:{cols:"12",sm:"6",md:"3"}},[e(o.A,{staticClass:"summary-card teal darken-1",attrs:{outlined:""}},[e(r.OQ,{staticClass:"text-center py-4"},[e("div",{staticClass:"text-caption white--text mb-1"},[t._v(" Voting Progress ")]),e("div",{staticClass:"text-h5 white--text font-weight-bold"},[t._v(" "+t._s(t.summary.votingPercentage)+"% ")])])],1)],1)],1),e(o.A,{staticClass:"mt-4",attrs:{outlined:""}},[e(r.ri,{staticClass:"py-2"},[e(w.A,{staticClass:"table-search",attrs:{"prepend-inner-icon":"mdi-magnify",label:"Search Students","single-line":"","hide-details":"",filled:"",rounded:"",dense:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(l.A,{staticClass:"elevation-0",attrs:{headers:t.headers,items:t.reportData,search:t.search,loading:t.loading,"items-per-page":10,"footer-props":{"items-per-page-options":[10,25,50,100],"show-current-page":!0,"show-first-last-page":!0},dense:""},scopedSlots:t._u([{key:"item.hasVoted",fn:function({item:s}){return[e(i.A,{staticClass:"font-weight-medium",attrs:{color:s.hasVoted?"success":"error","x-small":"",dark:""}},[e(u.A,{attrs:{left:"","x-small":""}},[t._v(" "+t._s(s.hasVoted?"mdi-check":"mdi-close")+" ")]),t._v(" "+t._s(s.hasVoted?"Voted":"Not Voted")+" ")],1)]}},{key:"progress",fn:function(){return[e(f.A,{attrs:{indeterminate:"",color:"primary"}})]},proxy:!0},{key:"no-data",fn:function(){return[e("div",{staticClass:"text-center py-6"},[e(u.A,{attrs:{large:"",color:"grey lighten-1"}},[t._v("mdi-ballot-outline")]),e("div",{staticClass:"text-subtitle-1 grey--text mt-2"},[t._v(" No voting data available ")])],1)]},proxy:!0}])})],1)],1)],1)],1)],1),e(b.A,{attrs:{color:t.snackbar.color,timeout:4e3,top:""},scopedSlots:t._u([{key:"action",fn:function({attrs:s}){return[e(a.A,t._b({attrs:{text:""},on:{click:function(e){t.snackbar.show=!1}}},"v-btn",s,!1),[t._v(" Close ")])]}}]),model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(" "+t._s(t.snackbar.text)+" ")])],1)},k=[],C=(s(4114),s(4603),s(7566),s(8721),{name:"VotingReport",data:()=>({selectedElection:null,elections:[],reportData:[],loading:!1,search:"",summary:{totalStudents:0,voted:0,notVoted:0,votingPercentage:0},headers:[{text:"Student No.",value:"studentNo",width:"120px"},{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Program",value:"program"},{text:"Year Level",value:"yearLevel",width:"100px"},{text:"Voting Status",value:"hasVoted",width:"120px"}],snackbar:{show:!1,text:"",color:"info"},currentElectionStatus:null}),computed:{isElectionCompleted(){return"completed"===this.currentElectionStatus}},async created(){await this.fetchElections()},methods:{formatDate(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},getStatusColor(t){const e={upcoming:"info",ongoing:"warning",completed:"success"};return e[t]||"grey"},async fetchElections(){try{const t=await this.$http.get("/election");this.elections=t.data.data.items}catch(t){console.error("Error fetching elections:",t),this.showSnackbar("Failed to fetch elections","error")}},async generateReport(t){if(t){this.loading=!0;try{const e=this.elections.find((e=>e._id===t));this.currentElectionStatus=e?.status;const s=await this.$http.get(`/report/voting-status/${t}`);this.reportData=s.data.data,this.summary=s.data.summary}catch(e){console.error("Error generating report:",e),this.showSnackbar("Failed to generate report","error")}finally{this.loading=!1}}},async downloadResults(){if(this.selectedElection)try{const t=await this.$http.get(`/vote/results/${this.selectedElection}/pdf`,{responseType:"blob"}),e=new Blob([t.data],{type:"application/pdf"}),s=window.URL.createObjectURL(e);window.open(s,"_blank");const a=document.createElement("a");a.href=s,a.download=`election-results-${this.selectedElection}.pdf`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),this.showSnackbar("PDF generated successfully","success")}catch(t){console.error("PDF generation error:",t),this.showSnackbar("Failed to generate PDF","error")}},exportToExcel(){if(this.reportData.length)try{const t=this.reportData.map((t=>({"Student No.":t.studentNo,"First Name":t.firstName,"Last Name":t.lastName,Program:t.program,"Year Level":t.yearLevel,"Voting Status":t.hasVoted?"Voted":"Not Voted"}))),e=this.convertToCSV(t),s=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`voting_report_${(new Date).toISOString()}.csv`,o.click(),URL.revokeObjectURL(a),this.showSnackbar("Report exported successfully","success")}catch(t){console.error("Export error:",t),this.showSnackbar("Failed to export report","error")}},convertToCSV(t){const e=Object.keys(t[0]),s=[];s.push(e.join(","));for(const a of t){const t=e.map((t=>{const e=a[t];return`"${e}"`}));s.push(t.join(","))}return s.join("\n")},showSnackbar(t,e){this.snackbar={show:!0,text:t,color:e}}}}),_=C,A=s(1656),S=(0,A.A)(_,x,k,!1,null,"24924561",null),E=S.exports},7150:function(t,e,s){s.d(e,{A:function(){return u}});var a=s(8184),o=s(8743),r=s(3381),i=s(428),n=s(6763),c=s(5803),l=s(4152),d=s(6988),u=(0,c.A)(a.A,o.A,i.A,(0,n.P)(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:t=>"string"===typeof t||!1===t},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:r.A.options.computed.isDark.call(this)},styles(){if(this.absolute||!this.app)return{};const{bar:t,bottom:e,footer:s,insetFooter:a,left:o,right:r,top:i}=this.$vuetify.application;return{paddingBottom:(0,l.Dg)(e+s+a),paddingLeft:(0,l.Dg)(o),paddingRight:(0,l.Dg)(r),paddingTop:(0,l.Dg)(t+i)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&(0,d.rq)("auto-height",this),0==this.timeout&&(0,d.CI)('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[(0,l.$c)(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[(0,l.$c)(this)])},genWrapper(){const t=this.hasBackground?this.setBackgroundColor:this.setTextColor,e=t(this.color,{staticClass:"v-snack__wrapper",class:a.A.options.computed.classes.call(this),style:a.A.options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:()=>window.clearTimeout(this.activeTimeout),pointerleave:this.setTimeout}});return this.$createElement("div",e,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const t=Number(this.timeout);this.isActive&&![0,-1].includes(t)&&(this.activeTimeout=window.setTimeout((()=>{this.isActive=!1}),t))}},render(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})},6955:function(t,e,s){var a=s(2140),o=s(4901),r=s(2195),i=s(8227),n=i("toStringTag"),c=Object,l="Arguments"===r(function(){return arguments}()),d=function(t,e){try{return t[e]}catch(s){}};t.exports=a?r:function(t){var e,s,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(s=d(e=c(t),n))?s:l?r(e):"Object"===(a=r(e))&&o(e.callee)?"Arguments":a}},2106:function(t,e,s){var a=s(283),o=s(4913);t.exports=function(t,e,s){return s.get&&a(s.get,e,{getter:!0}),s.set&&a(s.set,e,{setter:!0}),o.f(t,e,s)}},2140:function(t,e,s){var a=s(8227),o=a("toStringTag"),r={};r[o]="z",t.exports="[object z]"===String(r)},655:function(t,e,s){var a=s(6955),o=String;t.exports=function(t){if("Symbol"===a(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},2812:function(t){var e=TypeError;t.exports=function(t,s){if(t<s)throw new e("Not enough arguments");return t}},4603:function(t,e,s){var a=s(6840),o=s(9504),r=s(655),i=s(2812),n=URLSearchParams,c=n.prototype,l=o(c.append),d=o(c["delete"]),u=o(c.forEach),h=o([].push),m=new n("a=1&a=2&b=3");m["delete"]("a",1),m["delete"]("b",void 0),m+""!=="a=2"&&a(c,"delete",(function(t){var e=arguments.length,s=e<2?void 0:arguments[1];if(e&&void 0===s)return d(this,t);var a=[];u(this,(function(t,e){h(a,{key:e,value:t})})),i(e,1);var o,n=r(t),c=r(s),m=0,p=0,v=!1,g=a.length;while(m<g)o=a[m++],v||o.key===n?(v=!0,d(this,o.key)):p++;while(p<g)o=a[p++],o.key===n&&o.value===c||l(this,o.key,o.value)}),{enumerable:!0,unsafe:!0})},7566:function(t,e,s){var a=s(6840),o=s(9504),r=s(655),i=s(2812),n=URLSearchParams,c=n.prototype,l=o(c.getAll),d=o(c.has),u=new n("a=1");!u.has("a",2)&&u.has("a",void 0)||a(c,"has",(function(t){var e=arguments.length,s=e<2?void 0:arguments[1];if(e&&void 0===s)return d(this,t);var a=l(this,t);i(e,1);var o=r(s),n=0;while(n<a.length)if(a[n++]===o)return!0;return!1}),{enumerable:!0,unsafe:!0})},8721:function(t,e,s){var a=s(3724),o=s(9504),r=s(2106),i=URLSearchParams.prototype,n=o(i.forEach);a&&!("size"in i)&&r(i,"size",{get:function(){var t=0;return n(this,(function(){t++})),t},configurable:!0,enumerable:!0})}}]);
//# sourceMappingURL=173.36a888f0.js.map