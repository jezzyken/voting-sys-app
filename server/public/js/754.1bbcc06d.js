"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[754],{8754:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var i=s(3740),r=s(3698),a=s(2938),n=s(4414),o=s(3449),l=s(5961),d=s(174),h=s(6930),u=s(5420),c=s(2756),p=s(7112),m=(s(4114),function(){var t=this,e=t._self._c;return e("div",{staticClass:"login-page"},[e("div",{staticClass:"background-animation"}),e(o.A,{staticClass:"fill-height",attrs:{fluid:""}},[e(c.A,{attrs:{align:"center",justify:"center"}},[e(n.A,{attrs:{cols:"12",sm:"10",md:"8",lg:"6",xl:"5"}},[e(r.A,{staticClass:"login-card mx-auto",attrs:{elevation:"10"}},[e(c.A,{attrs:{"no-gutters":""}},[e(n.A,{staticClass:"login-image d-none d-md-flex",attrs:{cols:"12",md:"5"}},[e(u.A,{staticClass:"fill-height",attrs:{src:"https://source.unsplash.com/random/800x1200?voting",gradient:"to top right, rgba(19,84,122,.9), rgba(128,208,199,.9)"}},[e("div",{staticClass:"image-overlay d-flex flex-column justify-center align-center text-center px-4"},[e("h2",{staticClass:"text-h4 font-weight-bold white--text mb-3"},[t._v(" GITVote ")]),e("p",{staticClass:"white--text"},[t._v(" Empowering your voice in the democratic process ")])])])],1),e(n.A,{attrs:{cols:"12",md:"7"}},[e(a.OQ,{staticClass:"pa-8"},[e("h1",{staticClass:"text-h4 font-weight-bold mb-6 primary--text text-center"},[t._v(" Login ")]),e(d.A,{on:{submit:function(e){return e.preventDefault(),t.submitLogin.apply(null,arguments)}}},[e(p.A,{attrs:{label:"Student ID","prepend-inner-icon":"mdi-account",outlined:"",dense:"",required:""},model:{value:t.studentId,callback:function(e){t.studentId=e},expression:"studentId"}}),e(l.Qo,[t.showOtp?e(p.A,{attrs:{label:"OTP",type:"number","prepend-inner-icon":"mdi-lock",outlined:"",dense:"",required:""},scopedSlots:t._u([{key:"append",fn:function(){return[e(i.A,{staticClass:"ml-2",attrs:{text:"",small:"",color:"primary",disabled:!t.canResendOtp},on:{click:t.resendOtp}},[t._v(" "+t._s(t.resendButtonText)+" ")])]},proxy:!0}],null,!1,184852325),model:{value:t.otp,callback:function(e){t.otp=e},expression:"otp"}}):t._e()],1),e(i.A,{staticClass:"mt-6",attrs:{color:"primary",type:"submit",block:"",large:"",loading:t.loading,elevation:"2",disabled:t.showOtp&&!t.otp}},[t._v(" "+t._s(t.showOtp?"Verify OTP":"Send OTP")+" ")])],1),e("div",{staticClass:"mt-6 text-center"},[e(i.A,{staticClass:"text-capitalize",attrs:{text:"",color:"secondary"},on:{click:function(e){return t.$router.push("/election/view")}}},[e(h.A,{attrs:{left:""}},[t._v("mdi-arrow-left")]),t._v(" Back to Home ")],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)}),g=[],f=s(5353),v={data:()=>({studentId:"",email:"",otp:"",showOtp:!1,loading:!1,error:"",password:"",resendTimer:60,canResendOtp:!1,timerInterval:null}),computed:{resendButtonText(){return this.canResendOtp?"Resend OTP":`Wait ${this.resendTimer}s`}},methods:{...(0,f.i0)("student",["login"]),startResendTimer(){this.resendTimer=60,this.canResendOtp=!1,clearInterval(this.timerInterval),this.timerInterval=setInterval((()=>{this.resendTimer>0?this.resendTimer--:(this.canResendOtp=!0,clearInterval(this.timerInterval))}),1e3)},async resendOtp(){if(this.canResendOtp){this.loading=!0;try{const t=await this.login({studentId:this.studentId,password:this.password||null,email:this.email,otp:null});t.error?(this.error=t.error,alert("Invalid Student ID or password"),"OTP has expired"===this.error&&(this.showOtp=!1,this.startResendTimer(),this.otp="")):(this.$root.$emit("show-snackbar","OTP resent successfully"),this.startResendTimer())}finally{this.loading=!1}}},async submitLogin(){this.loading=!0,this.error="";try{const t=await this.login({studentId:this.studentId,password:this.password||null,email:this.email,otp:this.showOtp?this.otp:null});t.error?(this.error=t.error,alert("Invalid Student ID or password"),"OTP has expired"===this.error&&(this.showOtp=!1,this.otp="")):(this.$root.$emit("show-snackbar",t.message),t.showOtp?(this.showOtp=!0,this.startResendTimer()):this.$router.push("/election/portal"))}finally{this.loading=!1}},beforeDestroy(){clearInterval(this.timerInterval)}}},w=v,b=s(1656),x=(0,b.A)(w,m,g,!1,null,"3ca38e1a",null),y=x.exports},174:function(t,e,s){s(4114);var i=s(5803),r=s(7717),a=s(7540),n=s(4152);e.A=(0,i.A)(r.A,(0,a.G)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),s={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?s.shouldValidate=t.$watch("shouldValidate",(i=>{i&&(this.errorBag.hasOwnProperty(t._uid)||(s.valid=e(t)))})):s.valid=e(t),s},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const s=this.watchers.find((t=>t._uid===e._uid));s&&(s.valid(),s.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},(0,n.$c)(this))}})}}]);
//# sourceMappingURL=754.1bbcc06d.js.map